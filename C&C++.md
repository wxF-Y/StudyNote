## 多参数入栈顺序&参数计算顺序

##### 1.入栈顺序：与调用约定有关, windows 一般使用 __stdcall

![func_call_convention](image\func_call_convention.png)

#### 2.参数计算顺序：C/C++规范未定义，与编译器有关

```c++
#include <stdio.h>

int main () {
 int a = 2;
 printf("%d, %d, %d", a, (a = (a + 2)), (a = (a + 3)));
 system("pause");
 return 0;
}
//win10 + VS2019 输出: 7, 7, 7
//clang输出结果 2 4 7 
```

vs的计算顺序是从右至左，clang的计算顺序是从左至右，具体的计算流程分析就很简单了。

对于c/c++函数参数的读取顺序，参数入栈时顺序从右向左入栈，但是在入栈前会先把参数列表里的表达式从右向左算一遍得到表达式的结果，最后再把这些运算结果统一入栈。

在参数入栈前，编译器会先把参数的表达式都处理掉，对于一般的操作来说，参数入栈时取值是直接从变量的内存地址里取的，但是对于a++操作，编译器会开辟一个缓冲区来保存当前a的值，然后再对a继续操作，最后参数入栈时的取值是从缓冲区取，而不是直接从a的内存地址里取。
知乎文章地址：https://zhuanlan.zhihu.com/p/381907110